# 「マージ（merge）」とは？初心者向けやさしい解説 🔀

[[2025-09-24-01 GitHubにおけるブランチの「origin」とは？初心者向け徹底解説]]

https://note.com/smartsidenote/n/n67ddd4c14021
https://note.com/smartsidenote/n/n3575c1af5e50
https://note.com/smartsidenote/n/nfed51aa1fea9

**ジャンル・カテゴリ:** ハウツー（How-to）🛠️  
**想定文字数:** 約900〜1,400字（初心者が理解して実践できる量）📚

## 概要：マージって何？ 🤔
- マージ（merge）は、**別々に進めた作業（ブランチ）の変更を1つにまとめる操作**です。  
- たとえば「main（本線）」で安定したコードがあり、「feature-xxx」ブランチで新機能を作ったとき、その変更をmainに取り込むことを「マージ」と呼びます。🎯

## マージの必要性とメリット 🌟
- **変更を統合する**ことで最新の機能や修正をメインに反映できる。  
- **履歴が残る**ため「誰が」「いつ」「何を」加えたか追跡できる。  
- **チーム開発での調整**に不可欠（共同作業を安全に進めるため）。👥

## マージの基本フロー（ローカルでの例） 🧭
- 作業の流れは大まかに以下：
  - ブランチを作る → 作業・コミット → リモートにpush → mainを最新にしてマージ → push
- 代表的なコマンド例（順に実行）:
```bash
    git checkout main
    git pull origin main
    git merge feature-branch
    git push origin main
```
- `git merge feature-branch` を実行すると、feature-branch の変更が main に統合されます。成功すればマージコミットが作られることが多いです。✅

## マージの種類と違い ⚖️
### 1) マージコミット（通常マージ）
- 履歴をそのまま残して「マージコミット」を作る。履歴の分岐・統合が見える。  
- メリット：誰がどのブランチを統合したか一目瞭然。デバッグ時に便利。🔎

### 2) Fast-forward（ファストフォワード）
- main がそのまま進められる場合、単純にポインタを進めるだけでマージコミットは作られない。履歴は直線的。➡️

### 3) Squash（スクワッシュ）
- feature の複数コミットを1つにまとめてから統合する（GitHubの "Squash and merge"）。履歴がきれいになる。🧼

### 4) Rebase（リベース）
- feature のベースを main の先頭に付け替えてから統合する。履歴を線形に保てるが、公開済み履歴の書き換えは注意が必要。⚠️

## GitHub上（Pull Request）でのマージ 🖥️
- 通常は「Pull Request（PR）」で差分を見せレビューを受けてマージする。  
- マージボタンの選択肢：
  - Create a merge commit（マージコミット）
  - Squash and merge（スクワッシュ）
  - Rebase and merge（リベース）
- PRにより、コードレビュー・CI（自動テスト）を通して安全にマージできます。🔁

## マージでよく起きる「コンフリクト（競合）」の対処法 🛠️
- 状況：同じファイルの同じ行を別ブランチで変更した場合、どちらを採用するか自動判断できず競合が発生します。💥
- 解決手順（ローカルマージの例）:
```bash
    git merge feature-branch
```
  - コンフリクト発生 → `git status` で該当ファイルを確認  
  - 該当ファイルを開き、<<<<<<< / ======= / >>>>>>> の区切りを手動で編集して解決  
  - `git add <解決したファイル>`  
  - `git commit`（マージコミットを作成）  
  - `git push origin main`
- やばければ `git merge --abort` でマージ前に戻せます（マージ中のみ有効）。🛑

## ベストプラクティス ✅
- 小さな単位で頻繁にマージ（大きいPRはレビューが重くなる）。🧩  
- マージ前に `git pull --rebase origin main` 等で最新化してから作業すると衝突が減る。🔄  
- CI（テスト）が通ってからマージする。テスト自動化は必須級。🧪  
- main に直接 push せず、PR→レビュー→マージの流れをルール化する。🔒  
- マージ後は不要になったブランチを削除して整理する。🧹

## チェックリスト（マージ前に確認すること）🧾
- CI が成功しているか（テスト・Lint）✅
- レビュワーの承認があるか（チームルール）👀
- main と競合しないか、または競合を解決済みか🔧
- マージ戦略（merge/squash/rebase）は方針に沿っているか📐

## 補足（見落としがちな手順）🔎
- **ブランチ保護ルール**：main に直接マージする際は「保護ルール」を設定し、強制pushの禁止や必須レビューを設定するのが安全。  
- **リリースノート／CHANGELOG**：重要な変更はマージ時に追記しておくと運用が楽。📘  
- **デプロイとの連携**：マージがトリガーで自動デプロイされる設定になっている場合、マージ前にステージ環境での検証を忘れずに。🚀

## まとめ 🎯
- マージは「別々に進めた作業を安全に統合する」ための基本操作。  
- コマンド操作（ローカル）でも、Pull Request（GitHub）でも同じ目的で使う。  
- コンフリクト、マージ方式の違い、CIやレビューのルールを理解しておくと、チーム開発がスムーズになります。😊

※この記事はChatGPTの回答を基に作成しています。

[[B11 GitHubにおける「プル(Pull)」と「プルリクエスト(Pull Request)」とは？初心者向け解説 🔄📝]]
