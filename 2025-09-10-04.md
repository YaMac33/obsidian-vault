# HTMLの`_canvas_`要素で筆跡風の描画を実装する方法

[[2025-09-10-01 手書き風の文章をWebページに直接掲載する方法はある？]]

## はじめに
HTMLの`<canvas>`要素とJavaScriptを組み合わせることで、ユーザーがマウスやタッチ操作で自由に線を描ける「手書き風キャンバス」を作ることができます。線の太さや透明度を調整すれば、より「筆跡感のある描画」を実現できます。

## 基本的な仕組み
1. `canvas`要素をHTMLに設置する  
2. JavaScriptで`canvas`の描画コンテキストを取得する  
3. マウスやタッチイベントを使って線を描く処理を実装する  
4. 線の太さ・色・透明度を調整して筆跡風にする  

## 実装例の流れ

### HTML側の準備
```html
<canvas id="drawArea" width="600" height="400" style="border:1px solid #ccc;"></canvas>
```

JavaScriptの基本コード
```javascript
const canvas = document.getElementById("drawArea");
const ctx = canvas.getContext("2d");

// 線のスタイル設定
ctx.lineCap = "round";   // 丸みのある線端
ctx.lineJoin = "round";  // 線のつなぎを丸く
ctx.strokeStyle = "rgba(0, 0, 0, 0.8)"; // 半透明の黒

let isDrawing = false;
let lastX = 0;
let lastY = 0;

canvas.addEventListener("mousedown", (e) => {
  isDrawing = true;
  [lastX, lastY] = [e.offsetX, e.offsetY];
});

canvas.addEventListener("mousemove", (e) => {
  if (!isDrawing) return;
  ctx.beginPath();
  ctx.moveTo(lastX, lastY);
  ctx.lineTo(e.offsetX, e.offsetY);

  // 筆跡感を出すために動きに応じて太さを変える
  const speed = Math.hypot(e.offsetX - lastX, e.offsetY - lastY);
  ctx.lineWidth = Math.max(1, 20 - speed); 

  ctx.stroke();
  [lastX, lastY] = [e.offsetX, e.offsetY];
});

canvas.addEventListener("mouseup", () => isDrawing = false);
canvas.addEventListener("mouseout", () => isDrawing = false);
```

# 筆跡風に見せる工夫

- **動きの速さに応じて線の太さを変える**  
  ゆっくり動かすと太く、速く動かすと細くなる → 書道っぽい表現  

- **透明度をランダムに調整する**  
  `rgba()` のアルファ値を微調整するとインクの濃淡が出る  

- **グラデーションや影をつける**  
  `ctx.shadowBlur` や `createLinearGradient` を使ってより自然な筆跡感を出せる  

---

## まとめ

`<canvas>` と JavaScript を使えば、手書き風の描画は比較的簡単に実現できます。  
基本の線描画に加え、速度や筆圧を模した太さ調整や濃淡の表現を加えると、よりリアルな「筆跡風キャンバス」が完成します。  

---

※この記事はChatGPTの回答を基に作成しています。

---

関連ページ（予定含む）  
01 手書き記事をそのまま掲載できるブログサービスはある？  
02 手書き風の文章をWebページに直接掲載する方法はある？  
03 当記事
04 SVGとは何か？ — 手書き文字を劣化なく表示するための基本  
05 iPadでインラインSVGのページを作成できる？  
06 GoodNotesでURLを発行できる？代替アプリやサービスはある？  
07 手書きページ作成とURL共有ができる無料サービスはある？  
08 iPadでMicrosoft OneNoteを使って手書きページを共有できる？  
09 OneNoteの共有URLをiframeでWebページに埋め込める？

---
https://note.com/smartsidenote/n/n10c00284a152

https://note.com/smartsidenote/n/n9f985989105f





[[2025-09-10-05  SVGとは何か？ — 手書き文字を劣化なく表示するための基本]]

