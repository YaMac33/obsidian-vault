
[[I10 Netlify Functions + GitHub Pages で Google Drive へファイルアップロードフォームを作る（HTML + JavaScript）]]

## はじめに
この記事では、Google Drive APIを利用してアプリやサービスをデプロイする際に必要な「Google 側の準備手順」を、初心者にもわかりやすく具体的に解説します。カテゴリは**ハウツー記事**です。Google Cloud Consoleの操作やサービスアカウントの設定に慣れていない人でも、この記事を見ながら進めれば準備が整えられるように構成しました。

## 手順の全体像
大まかな流れは以下の通りです。
1. Google Cloud Consoleでのプロジェクト作成
2. Google Drive APIの有効化
3. サービスアカウントの作成とキー取得
4. Google Drive上でのフォルダ作成と共有設定

## ステップ1：Google Cloud Consoleでプロジェクトを作成
### 手順
- [Google Cloud Console](https://console.cloud.google.com/) にアクセス
- 画面上部の「プロジェクトを選択」から「新しいプロジェクトを作成」をクリック
- プロジェクト名を入力し、必要に応じて組織や場所を指定
- 「作成」をクリックしてプロジェクトを作成

### 補足
作成したプロジェクトは、今後のAPI利用や認証設定の基盤になります。

## ステップ2：Google Drive APIを有効化
### 手順
- Google Cloud Consoleで対象のプロジェクトを選択
- 左上メニュー → 「APIとサービス」 → 「ライブラリ」を開く
- 検索バーで「Google Drive API」と入力し、選択
- 「有効にする」をクリック

### 補足
これを行わないとAPI経由でGoogle Driveにアクセスできません。

## ステップ3：サービスアカウントを作成しキーを取得
### 手順
- Google Cloud Console左メニュー → 「IAMと管理」 → 「サービスアカウント」
- 「サービスアカウントを作成」をクリック
- 名前を入力し「作成」を押す
- 権限は「基本」→「編集者」または必要に応じた権限を付与
- 作成後、サービスアカウントの一覧から該当アカウントを選択
- 「キー」タブ → 「鍵を追加」 → 「新しい鍵を作成」
- JSON形式を選び、キーをダウンロード

### 補足
- ダウンロードしたJSONファイルはアプリからGoogle Drive APIにアクセスする際に使用
- 失くすと再発行が必要になるため安全に保管

## ステップ4：Google Drive上でフォルダを作成し共有設定
### 手順
- Google Driveにアクセスし、新規フォルダを作成（例：「uploads」）
- フォルダを右クリック → 「共有」
- サービスアカウントのメールアドレス（例：`xxxxx@xxxx.iam.gserviceaccount.com`）を入力
- 権限を「編集者」に設定し「共有」をクリック

### 補足
この共有設定により、アプリ経由でファイルをアップロードできるようになります。

## よくあるつまずきポイント
- **JSONキーの紛失** → 新しいキーを作成して差し替える必要あり
- **フォルダの権限不足** → サービスアカウントに「閲覧者」ではなく必ず「編集者」を付与
- **API無効化エラー** → プロジェクト内でDrive APIが有効化されているか再確認

## まとめ
Google Drive APIを使ったファイルアップロード環境を整えるためには、  
- プロジェクト作成  
- API有効化  
- サービスアカウント作成とキー取得  
- Driveフォルダの共有設定  

の4ステップが欠かせません。ここまで完了すれば、アプリ側からDrive APIを使ってファイルの読み書きが可能になります。



※この記事はChatGPTの回答を基に作成しています。


[[I12 ターミナルで実行する `npm install` とは何か？ — 仕組み・使い方・注意点を丁寧に解説]]
